<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{block "title" .}}Умный дом{{end}}</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header>
        <a href="/devices" class="nav-btn">Главная</a>
        <!-- ИСПРАВИЛ: убрал слеш -->
        <a href="/request" class="nav-btn cart-btn">
            Корзина
            <span class="cart-count" id="cartCount">0</span>
        </a>
    </header>
    <main>
        {{block "content" .}}{{end}}
    </main>

    <script>
        // Обновляем счетчик корзины
        fetch('/request/count')
            .then(response => response.json())
            .then(data => {
                document.getElementById('cartCount').textContent = data.count;
            });
    </script>
</body>
</html>
{{define "content"}}
<div class="request-container">
    <h1 class="request-title">Корзина:</h1>

    {{if .Request}}
    <div class="address-section">
        <h2>Адрес дома, квартиры:</h2>
        <p class="address-value">{{.Request.Address}}</p>
    </div>

    <div class="devices-section">
        <h2>Устройства в корзине:</h2>
        {{range .Items}}
        <div class="request-item">
            <div class="item-image-frame">
                <img src="{{.Service.ImageURL}}" alt="{{.Service.Name}}" class="item-image">
            </div>
            <div class="item-info">
                <h3>{{.Service.Name}}</h3>
                <p>{{.Service.Model}}</p>
                <p>Трафик устройства: {{.Service.DataPerHour}} Кб/ч</p>
            </div>
            <div class="item-quantity">
                <span>Количество: {{.Quantity}}</span>
            </div>
        </div>
        {{end}}
    </div>

    <div class="calculation-section">
        <form action="/smart-cart/delete" method="POST" style="display: inline;">
            <input type="hidden" name="request_id" value="{{.Request.ID}}">
            <button type="submit" class="btn-calculate" style="background: #ff4444;">Удалить корзину</button>
        </form>
        <div class="traffic-result">
            <span>Общий объем трафика:</span>
            <span class="traffic-value">{{printf "%.2f" .Request.TotalTraffic}} Kб/ч</span>
        </div>
    </div>
    {{else}}
    <div class="empty-cart">
        <h2>Корзина пуста</h2>
        <p>Добавьте устройства из каталога</p>
        <a href="/smart-devices" class="btn-secondary">Перейти к каталогу</a>
    </div>
    {{end}}
</div>
{{end}}